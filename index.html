<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Particle Persona Quiz: Discover Your Subatomic Self</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div id="quiz-container">
        <div id="home-page">
            <h1>Particle Persona Quiz:<br>Discover Your Subatomic Self</h1>
            <p>Ever wondered if you're more of a quirky quark or a noble neutrino? Are you as elusive as a neutrino or
                as influential as a Higgs boson? Take this quiz to uncover your subatomic alter ego. <br><br>
                <strong>Warning:</strong><em> results may be subject to quantum uncertainty!</em>
            </p>
            <button id="start-quiz">Let's Begin!</button>
        </div>

        <div id="question-page" style="display: none;">
            <h2 id="question-text"></h2>
            <div id="answer-buttons"></div>
        </div>

        <div id="results-page" style="display: none;">
            <h2>Your Particle Persona Is:</h2>
            <img id="result-image" src="" alt="Your Particle Persona">
            <p id="result-description"></p>
            <button id="restart-quiz">Take the Quiz Again</button>
        </div>
    </div>

    <script src="questions.js"></script>
    <script>
        const particlePersonas = {
            P01: "Anti-Down Quark",
            P02: "Neutralino",
            P03: "Down Quark",
            P04: "Electron",
            P05: "Higgs Boson",
            P06: "WIMP (Weakly Interacting Massive Particle)",
            P07: "Gravitino",
            P08: "Axion",
            P09: "Antimuon",
            P10: "Anti-Up Quark",
            P11: "Positron (antielectron)",
            P12: "Up Quark",
            P13: "Electron neutrino",
            P14: "Electron antineutrino",
            P15: "Sterile neutrino",
            P16: "Muon"
        };

        let currentQuestion = 0;
        let personalityScores = {
            P6: 0, P13: 0, P4: 0, P11: 0, P14: 0, P7: 0, P8: 0, P15: 0, P16: 0,
            P2: 0, P9: 0, P5: 0, P3: 0, P12: 0, P1: 0, P10: 0
        };

        document.getElementById('start-quiz').addEventListener('click', startQuiz);
        document.getElementById('restart-quiz').addEventListener('click', restartQuiz);

        function startQuiz() {
            document.getElementById('home-page').style.display = 'none';
            document.getElementById('question-page').style.display = 'block';
            showQuestion(currentQuestion);
        }

        function showQuestion(index) {
            const question = questions[index];
            document.getElementById('question-text').textContent = question.question;
            const answerButtons = document.getElementById('answer-buttons');
            answerButtons.innerHTML = '';
            question.answers.forEach(answer => {
                const button = document.createElement('button');
                button.textContent = answer.text;
                button.addEventListener('click', () => selectAnswer(answer));
                answerButtons.appendChild(button);
            });
        }

        function selectAnswer(answer) {
            answer.types.forEach(type => personalityScores[type]++);
            document.querySelectorAll('#answer-buttons button').forEach(button => {
                button.disabled = true;
            });

            setTimeout(() => {
                currentQuestion++;
                if (currentQuestion < questions.length) {
                    showQuestion(currentQuestion);
                } else {
                    showResults();
                }
            }, 100);
        }

        function showResults() {
            document.getElementById('question-page').style.display = 'none';
            document.getElementById('results-page').style.display = 'block';
            const dominantType = Object.keys(personalityScores).reduce((a, b) => personalityScores[a] > personalityScores[b] ? a : b);
            const particleName = particlePersonas[dominantType];
            document.getElementById('result-image').src = `profiles/${dominantType}.png`;
            document.getElementById('result-description').textContent = `Your Particle Persona is... ${particleName}!`;
        }

        function restartQuiz() {
            currentQuestion = 0;
            personalityScores = Object.fromEntries(Object.keys(personalityScores).map(key => [key, 0]));
            document.getElementById('results-page').style.display = 'none';
            document.getElementById('home-page').style.display = 'block';
        }
    </script>
</body>

</html>